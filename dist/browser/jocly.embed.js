"use strict";function ReceiveMessage(e){function t(t){t=t||{},window.parent.postMessage({joclyEmbeddedGameId:matchId,replyId:e.data.replyId,message:t},"*")}function o(e){console.warn("Embed error:",e),"object"==(void 0===e?"undefined":_typeof(e))&&(e={message:e.message,fileName:e.fileName,lineNumber:e.lineNumber,stack:e.stack}),t({type:"error",error:e})}if((e.origin||e.originalEvent.origin)==new URL(window.location).origin){var a=e.data.message;switch(a.type){case"init":matchId=a.id;var n=document.getElementById("area");Jocly.createMatch(a.gameName).then(function(e){function i(){e.game.AttachElement(n).then(function(){e.area=n;var o=a.options&&a.options.viewOptions;if(o){var i={mSkin:"skin",mNotation:"notation",mSounds:"sounds",mShowMoves:"showMoves",mAutoComplete:"autoComplete"};for(var r in i)void 0!==o[i[r]]&&(e.game[r]=o[i[r]])}e.game.GameInitView(),e.game.DisplayBoard(),t()}).catch(o)}gMatch=e,e.game.Load({playedMoves:a.playedMoves}),"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?i():window.addEventListener("DOMContentLoaded",function(){i()})}).catch(o);break;case"method":try{gMatch[a.methodName].apply(gMatch,a.args).then(function(){t({args:Array.from(arguments)})},o)}catch(e){o(e)}break;case"destroy":var i=gMatch.game.mPlayedMoves;gMatch.destroy().then(function(){t({playedMoves:i})})}}}function Resize(){var e=gMatch&&gMatch.game;e&&(e.mGeometry={width:window.innerWidth,height:window.innerHeight},e.GameDestroyView(),e.GameInitView(),e.DisplayBoard())}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},matchId,gMatch;window.addEventListener("message",ReceiveMessage,!1),window.addEventListener("resize",Resize,!1);